zabbix_export:
  version: '7.4'
  template_groups:
    - uuid: 8fdb1680986b48c781ac1ea2a485a917
      name: BA/HTTP
  templates:
    - uuid: f4d0ecadd0e647d3bf034ea2af2cf2b9
      template: 'BA - HTTP - Axis'
      name: 'BA - HTTP - Axis'
      vendor:
        name: 'below average'
        version: 0.0.0.0
      groups:
        - name: BA/HTTP
      items:
        - uuid: d2a61ecc1d0f40c2b51e92acc2321e0d
          name: 'Device Firmware Version'
          type: DEPENDENT
          key: camera.firmware.version
          history: 7d
          value_type: CHAR
          inventory_link: OS
          preprocessing:
            - type: REGEX
              parameters:
                - 'root.Properties.Firmware.Version="(.*)"'
                - \1
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: camera.parameters
          tags:
            - tag: 'Item Type'
              value: Firmware
        - uuid: b55cd1f3182b449c95525eaf00cac1c8
          name: 'Device Model'
          type: DEPENDENT
          key: camera.model
          history: 7d
          value_type: CHAR
          inventory_link: MODEL
          preprocessing:
            - type: REGEX
              parameters:
                - 'root.Brand.ProdNbr="(.*)"'
                - \1
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: camera.parameters
          tags:
            - tag: 'Item Type'
              value: Model
        - uuid: d9a3aac2a16745529f93a65b78f0c274
          name: 'Device Name'
          type: DEPENDENT
          key: camera.name
          history: 7d
          value_type: CHAR
          inventory_link: NAME
          preprocessing:
            - type: REGEX
              parameters:
                - 'root.ImageSource.I0.Name="(.*)"'
                - \1
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: camera.parameters
          tags:
            - tag: 'Item Type'
              value: Name
        - uuid: 95ddd29e014c4505b55c8fb1cd604c0b
          name: 'Device MAC'
          type: DEPENDENT
          key: camera.net.mac
          history: 7d
          value_type: CHAR
          inventory_link: MACADDRESS_A
          preprocessing:
            - type: REGEX
              parameters:
                - 'root.Network.eth0.MACAddress="(.*)"'
                - \1
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: camera.parameters
          tags:
            - tag: 'Item Type'
              value: MAC
        - uuid: ec385938d1354e08876f86565f5d7ccf
          name: 'Device Parameters'
          type: HTTP_AGENT
          key: camera.parameters
          delay: 15m
          history: 1h
          value_type: TEXT
          authtype: DIGEST
          username: '{$AXIS_CAM_USERNAME}'
          password: '{$AXIS_CAM_PASSWORD}'
          timeout: 30s
          url: 'http://{HOST.IP}/axis-cgi/admin/paramlist.cgi'
          tags:
            - tag: 'Item Type'
              value: HTTP
          triggers:
            - uuid: d3e13913f3cc4d7381e6be130c70ca79
              expression: 'nodata(/BA - HTTP - Axis/camera.parameters,60m)=1'
              name: 'Could not retrieve device parameters via HTTP'
              priority: WARNING
              description: 'Please check the password on the device.'
              manual_close: 'YES'
              dependencies:
                - name: 'Device offline'
                  expression: 'last(/BA - Generic - ICMP/icmppingretry[{HOST.HOST},3])=0'
                - name: 'ICMP Loss >= {$ICMP_HIGH_LOSS_WARN}%'
                  expression: 'avg(/BA - Generic - ICMP/icmppingloss[{HOST.HOST},5,1000],#3)>={$ICMP_HIGH_LOSS_WARN}'
              tags:
                - tag: 'Trigger Type'
                  value: State
        - uuid: ab21bc5de5734e6e8aa6f20a243fa019
          name: 'Device Sensor'
          type: DEPENDENT
          key: camera.sensor
          history: 7d
          value_type: CHAR
          inventory_link: TYPE
          preprocessing:
            - type: REGEX
              parameters:
                - 'root.Image.I0.Appearance.Resolution="(.*)"'
                - \1
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: camera.parameters
          tags:
            - tag: 'Item Type'
              value: Sensor
        - uuid: 1e7e44b7fcb34b32abd25100f9748166
          name: 'Device Serial'
          type: DEPENDENT
          key: camera.serial
          history: 7d
          value_type: CHAR
          inventory_link: SERIALNO_A
          preprocessing:
            - type: REGEX
              parameters:
                - 'root.Properties.System.SerialNumber="(.*)"'
                - \1
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: camera.parameters
          tags:
            - tag: 'Item Type'
              value: Serial
      tags:
        - tag: Agent
          value: HTTP
        - tag: 'Template Type'
          value: Poller

