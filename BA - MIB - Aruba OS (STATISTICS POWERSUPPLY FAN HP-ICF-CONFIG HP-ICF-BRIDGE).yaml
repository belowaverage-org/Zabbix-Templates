zabbix_export:
  version: '7.4'
  template_groups:
    - uuid: 3fdb37c563464c49b24b75703e0038ed
      name: BA/MIBs
  templates:
    - uuid: 49d106e4ab994d41b8533cccb7a04abf
      template: 'BA - MIB - Aruba OS'
      name: 'BA - MIB - Aruba OS (STATISTICS POWERSUPPLY FAN HP-ICF-CONFIG HP-ICF-BRIDGE)'
      vendor:
        name: 'below average'
        version: 0.0.0.0
      groups:
        - name: BA/MIBs
      items:
        - uuid: d21b1ba6ab874dedad8afac0dabf7328
          name: 'CPU Usage'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.11.2.14.11.5.1.9.6.1.0
          key: cpu.usage
          history: 7d
          units: '%'
          tags:
            - tag: 'Item Type'
              value: Usage
          triggers:
            - uuid: 6b1079669c50408998310050e7d208b4
              expression: 'avg(/BA - MIB - Aruba OS/cpu.usage,{$CPU_HIGH_AVG_TIME_WARN})>={$CPU_USAGE_WARN}'
              name: 'CPU Usage >= {$CPU_USAGE_WARN}% for {$CPU_HIGH_AVG_TIME_WARN}'
              priority: AVERAGE
              manual_close: 'YES'
              tags:
                - tag: 'Trigger Type'
                  value: Threshold
        - uuid: 2fa7b638fe4d4da8bef7ff8c58974a88
          name: 'Memory Size'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SIZE}, .1.3.6.1.4.1.11.2.14.11.5.1.1.2.2.1.1.5]'
          key: memory.size
          delay: 1h
          history: 7d
          units: B
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.*.[''{#SIZE}''].sum()'
          tags:
            - tag: 'Item Type'
              value: Size
        - uuid: 525480a2f9a542f29cbc5a626c8e65bd
          name: 'Memory Usage'
          type: CALCULATED
          key: memory.usage
          history: 7d
          value_type: FLOAT
          units: '%'
          params: last(//memory.used)/last(//memory.size)
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '100'
          tags:
            - tag: 'Item Type'
              value: Usage
          triggers:
            - uuid: af7039dacfbc4facbe0677c9b402d06e
              expression: 'last(/BA - MIB - Aruba OS/memory.usage)>={$CPU_USAGE_WARN}'
              name: 'Memory Usage >= {$MEM_USAGE_WARN}%'
              priority: AVERAGE
              manual_close: 'YES'
              tags:
                - tag: 'Trigger Type'
                  value: Threshold
        - uuid: eb706ca0daea468595ef2a0b6ca09275
          name: 'Memory Used'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#FREE}, .1.3.6.1.4.1.11.2.14.11.5.1.1.2.2.1.1.6]'
          key: memory.used
          history: 7d
          units: B
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.*.[''{#FREE}''].sum()'
          tags:
            - tag: 'Item Type'
              value: Used
        - uuid: 5e4b2dafd1994d47b8604d26a2d75af9
          name: 'Running Config SHA'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.11.2.14.11.5.1.136.4.1.2.0
          key: snmp.aruba.config.sha.running
          delay: 15m
          history: 7d
          value_type: CHAR
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: 'Item Type'
              value: SHA
        - uuid: 9c9386c0f5c04abd99c9b6ebc5cc2508
          name: 'Startup Config SHA'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.11.2.14.11.5.1.136.4.1.3.0
          key: snmp.aruba.config.sha.startup
          delay: 15m
          history: 7d
          value_type: CHAR
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: 'Item Type'
              value: SHA
        - uuid: 3c14903dbe254135bd2c2d29f5c7a650
          name: 'Flash Version'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.11.2.14.11.5.1.59.1.3.1.4.1
          key: snmp.aruba.flash.version
          delay: 5m
          history: 1d
          value_type: CHAR
          inventory_link: OS_SHORT
          tags:
            - tag: 'Item Type'
              value: Version
            - tag: Software
              value: Flash
          triggers:
            - uuid: c3fe47015dbf41609e4f6b5fec1af2d1
              expression: 'find(/BA - MIB - Aruba OS/snmp.aruba.flash.version,,"regexp","{$SOFTWARE_VERSION_STRINGS}")=0'
              name: 'Flash version out of date'
              priority: INFO
              description: 'Please update the software on this device.'
              manual_close: 'YES'
              tags:
                - tag: 'Trigger Type'
                  value: State
        - uuid: 393faa601d5d4bc8bb6c0b3e5f41b39b
          name: 'Loop Protect Status'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#ENABLED}, .1.3.6.1.4.1.11.2.14.11.5.1.12.1.5.2.1.1.1]'
          key: snmp.aruba.loopprotect.status
          delay: 1h
          history: 7d
          description: 'Is loop protect enabled on all ports?'
          valuemap:
            name: Status
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.*.[''{#ENABLED}''].max()'
          tags:
            - tag: Config
              value: 'Loop Protect'
            - tag: 'Item Type'
              value: Status
          triggers:
            - uuid: ace8b81ed191423eb5c11ef7dcb577c4
              expression: 'last(/BA - MIB - Aruba OS/snmp.aruba.loopprotect.status)=2'
              name: 'Loop Protect disabled'
              status: DISABLED
              priority: INFO
              manual_close: 'YES'
              tags:
                - tag: 'Trigger Type'
                  value: State
        - uuid: 7d4f92aaf4d24a6d9897fe7a55b4e91b
          name: 'Loop Protect Timer'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.11.2.14.11.5.1.12.1.5.1.3.0
          key: snmp.aruba.loopprotect.timer
          delay: 1h
          history: 7d
          units: seconds
          tags:
            - tag: Config
              value: 'Loop Protect'
            - tag: 'Item Type'
              value: Seconds
          triggers:
            - uuid: b4e904ee82e5466bbf04d14ae07954ef
              expression: 'last(/BA - MIB - Aruba OS/snmp.aruba.loopprotect.timer)<>{$LOOP_PROTECT_TIMER}'
              name: 'Loop Protect Timer not set to {$LOOP_PROTECT_TIMER}s'
              priority: INFO
              description: 'Loop Protect Timer is not set to {$LOOP_PROTECT_TIMER} seconds.'
              manual_close: 'YES'
              tags:
                - tag: 'Trigger Type'
                  value: State
        - uuid: 98e32926ace9445b9694a8b13559a1a1
          name: 'Spanning Tree Status'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.11.2.14.11.5.1.12.1.4.4.0
          key: snmp.aruba.rstp.status
          delay: 1h
          history: 7d
          description: 'Is rapid spanning tree enabled on the switch?'
          valuemap:
            name: Status
          tags:
            - tag: Config
              value: 'Spanning Tree'
            - tag: 'Item Type'
              value: Status
          triggers:
            - uuid: c138a27225a84c9a9e7115c542fa80d6
              expression: 'last(/BA - MIB - Aruba OS/snmp.aruba.rstp.status)=1'
              name: 'Spanning Tree enabled'
              status: DISABLED
              priority: INFO
              manual_close: 'YES'
              tags:
                - tag: 'Trigger Type'
                  value: State
      discovery_rules:
        - uuid: 02c13eb8b1d14ff4bbf1687ac279c71b
          name: 'Aruba Fan Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#STATE}, .1.3.6.1.4.1.11.2.14.11.5.1.54.2.1.1.4]'
          key: aruba.fan.discovery
          delay: 1h
          lifetime: 30d
          enabled_lifetime_type: DISABLE_NEVER
          item_prototypes:
            - uuid: c1fd1186bed24c198b26b8d2cb0266b9
              name: 'Aruba Fan ({#SNMPINDEX}) Status'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.11.2.14.11.5.1.54.2.1.1.4.{#SNMPINDEX}'
              key: 'aruba.fan.status[{#SNMPINDEX}]'
              delay: 1h
              history: 7d
              valuemap:
                name: 'Fan Status'
              tags:
                - tag: Fan
                  value: '{#SNMPINDEX}'
                - tag: 'Item Type'
                  value: Status
              trigger_prototypes:
                - uuid: 2623bf6494cd42fa8bc84c04e93b1291
                  expression: 'last(/BA - MIB - Aruba OS/aruba.fan.status[{#SNMPINDEX}])=0 or last(/BA - MIB - Aruba OS/aruba.fan.status[{#SNMPINDEX}])=1 or last(/BA - MIB - Aruba OS/aruba.fan.status[{#SNMPINDEX}])=3 or last(/BA - MIB - Aruba OS/aruba.fan.status[{#SNMPINDEX}])=4 or last(/BA - MIB - Aruba OS/aruba.fan.status[{#SNMPINDEX}])=6'
                  name: 'Aruba Fan ({#SNMPINDEX}) Status Fault'
                  priority: AVERAGE
                  manual_close: 'YES'
                  tags:
                    - tag: 'Trigger Type'
                      value: State
        - uuid: ebf3d7bbf6bc407493285c95101d29fb
          name: 'Aruba PSU Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#STATUS}, .1.3.6.1.4.1.11.2.14.11.5.1.55.1.1.1.2, {#TEMP}, .1.3.6.1.4.1.11.2.14.11.5.1.55.1.1.1.4]'
          key: aruba.psu.discovery
          delay: 1h
          lifetime: 30d
          enabled_lifetime_type: DISABLE_NEVER
          item_prototypes:
            - uuid: e5c62e89d091416d8f513ad15b5a4458
              name: 'Aruba PSU ({#SNMPINDEX}) Status'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.11.2.14.11.5.1.55.1.1.1.2.{#SNMPINDEX}'
              key: 'aruba.psu.status[{#SNMPINDEX}]'
              delay: 1h
              history: 7d
              valuemap:
                name: 'PSU Status'
              tags:
                - tag: 'Item Type'
                  value: Status
                - tag: PSU
                  value: '{#SNMPINDEX}'
              trigger_prototypes:
                - uuid: e061727ff41e4d1da6d54acc47a88027
                  expression: |
                    last(/BA - MIB - Aruba OS/aruba.psu.status[{#SNMPINDEX}])=2 or
                    last(/BA - MIB - Aruba OS/aruba.psu.status[{#SNMPINDEX}])=4 or
                    last(/BA - MIB - Aruba OS/aruba.psu.status[{#SNMPINDEX}])=5 or
                    last(/BA - MIB - Aruba OS/aruba.psu.status[{#SNMPINDEX}])=6
                  name: 'Aruba PSU ({#SNMPINDEX}) Status Fault'
                  priority: AVERAGE
                  manual_close: 'YES'
                  tags:
                    - tag: 'Trigger Type'
                      value: State
            - uuid: 7eb98047105a4bc1a84e4d9230ed9a54
              name: 'Aruba PSU ({#SNMPINDEX}) Temperature'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.11.2.14.11.5.1.55.1.1.1.4.{#SNMPINDEX}'
              key: 'aruba.psu.temp[{#SNMPINDEX}]'
              delay: 30m
              history: 7d
              units: Celsius
              tags:
                - tag: 'Item Type'
                  value: Celsius
                - tag: PSU
                  value: '{#SNMPINDEX}'
              trigger_prototypes:
                - uuid: a8d0b6bb5c5343a2a130dd8bc39a0f33
                  expression: 'last(/BA - MIB - Aruba OS/aruba.psu.temp[{#SNMPINDEX}])>={$TEMP_C_WARN}'
                  name: 'Aruba PSU ({#SNMPINDEX}) Temperature >= {$TEMP_C_WARN}C'
                  priority: AVERAGE
                  manual_close: 'YES'
                  tags:
                    - tag: 'Trigger Type'
                      value: Threshold
          overrides:
            - name: 'No Temp'
              step: '1'
              filter:
                conditions:
                  - macro: '{#TEMP}'
                    value: '0'
                  - macro: '{#TEMP}'
                    value: '254'
              operations:
                - operator: LIKE
                  value: Temperature
                  discover: NO_DISCOVER
                - operationobject: TRIGGER_PROTOTYPE
                  operator: LIKE
                  value: Temperature
                  discover: NO_DISCOVER
      tags:
        - tag: Agent
          value: SNMP
        - tag: 'Template Type'
          value: Poller
      dashboards:
        - uuid: 5a74a2692f494cf1ae093a9fc4141824
          name: 'üå¥ Aruba'
          pages:
            - widgets:
                - type: graph
                  name: 'üß† CPU Usage'
                  width: '33'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'BA - MIB - Aruba OS'
                        name: 'CPU Usage'
                    - type: STRING
                      name: reference
                      value: AAAAE
                - type: graph
                  name: 'üí≠ Memory Usage'
                  'y': '5'
                  width: '33'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'BA - MIB - Aruba OS'
                        name: 'Memory Usage'
                    - type: STRING
                      name: reference
                      value: AAAAF
                - type: item
                  name: '#Ô∏è‚É£ Flash Version'
                  x: '33'
                  width: '12'
                  fields:
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'BA - MIB - Aruba OS'
                        key: snmp.aruba.flash.version
                    - type: INTEGER
                      name: show.0
                      value: '2'
                - type: item
                  name: 'üå≥ Spanning Tree Status'
                  x: '33'
                  'y': '2'
                  width: '12'
                  fields:
                    - type: INTEGER
                      name: decimal_places
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'BA - MIB - Aruba OS'
                        key: snmp.aruba.rstp.status
                    - type: INTEGER
                      name: show.0
                      value: '2'
                - type: item
                  name: 'üîÅ Loop Protect Status'
                  x: '33'
                  'y': '4'
                  width: '12'
                  fields:
                    - type: INTEGER
                      name: decimal_places
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'BA - MIB - Aruba OS'
                        key: snmp.aruba.loopprotect.status
                    - type: INTEGER
                      name: show.0
                      value: '2'
                - type: item
                  name: '‚è±Ô∏è Loop Protect Timer'
                  x: '33'
                  'y': '6'
                  width: '12'
                  fields:
                    - type: INTEGER
                      name: decimal_places
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'BA - MIB - Aruba OS'
                        key: snmp.aruba.loopprotect.timer
                    - type: INTEGER
                      name: show.0
                      value: '2'
                - type: item
                  name: '#Ô∏è‚É£ Running Config Hash'
                  x: '45'
                  width: '27'
                  fields:
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'BA - MIB - Aruba OS'
                        key: snmp.aruba.config.sha.running
                    - type: INTEGER
                      name: show.0
                      value: '2'
                - type: item
                  name: '#Ô∏è‚É£ Startup Config Hash'
                  x: '45'
                  'y': '2'
                  width: '27'
                  fields:
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'BA - MIB - Aruba OS'
                        key: snmp.aruba.config.sha.startup
                    - type: INTEGER
                      name: show.0
                      value: '2'
      valuemaps:
        - uuid: 9b1fc8e853c74f7088adf58aba8ab698
          name: 'Fan Status'
          mappings:
            - value: '0'
              newvalue: 'üî¥ Failed'
            - value: '1'
              newvalue: '‚ö´Ô∏è Removed'
            - value: '2'
              newvalue: '‚ö´Ô∏è Off'
            - value: '3'
              newvalue: 'üü° Under Speed'
            - value: '4'
              newvalue: 'üü° Over Speed'
            - value: '5'
              newvalue: 'üü¢ OK'
            - value: '6'
              newvalue: 'üü° Maxed'
        - uuid: 83f6c58a912942d3b2b28f315efe79f0
          name: 'PSU Status'
          mappings:
            - value: '1'
              newvalue: '‚ö´Ô∏è Not Present'
            - value: '2'
              newvalue: 'üü° Not Plugged'
            - value: '3'
              newvalue: 'üü¢ Powered'
            - value: '4'
              newvalue: 'üî¥ Failed'
            - value: '5'
              newvalue: 'üî¥ Permanent Failure'
            - value: '6'
              newvalue: 'üü° Maxed'
        - uuid: 8eb209439d724701966573df46e17da0
          name: Status
          mappings:
            - value: '1'
              newvalue: 'üü¢ Enabled'
            - value: '2'
              newvalue: 'üü† Disabled'
  triggers:
    - uuid: 0cb2f24a7f724fad988e17ed41f374ee
      expression: 'last(/BA - MIB - Aruba OS/snmp.aruba.config.sha.startup)<>last(/BA - MIB - Aruba OS/snmp.aruba.config.sha.running)'
      name: 'Configuration not saved'
      priority: WARNING
      description: 'The startup config does not match the running config. Please save the running config to flash.'
      manual_close: 'YES'
      tags:
        - tag: 'Trigger Type'
          value: State
  graphs:
    - uuid: 9cdb0e17c038481daca833f565fc1536
      name: 'CPU Usage'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 199C0D
          calc_fnc: ALL
          item:
            host: 'BA - MIB - Aruba OS'
            key: cpu.usage
    - uuid: 20263e09ac454893b1c06d8167076df2
      name: 'Memory Usage'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00FFFF
          calc_fnc: ALL
          item:
            host: 'BA - MIB - Aruba OS'
            key: memory.usage
        - sortorder: '1'
          color: FF8000
          yaxisside: RIGHT
          calc_fnc: ALL
          item:
            host: 'BA - MIB - Aruba OS'
            key: memory.used

