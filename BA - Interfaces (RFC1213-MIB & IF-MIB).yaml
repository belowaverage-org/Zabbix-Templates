zabbix_export:
  version: '6.2'
  date: '2022-10-18T04:03:41Z'
  template_groups:
    -
      uuid: 3fdb37c563464c49b24b75703e0038ed
      name: BA/Modules
  templates:
    -
      uuid: 71e181bbccaf4ac6ad6dbc31f4ef7ffa
      template: 'BA - Interfaces'
      name: 'BA - Interfaces (RFC1213-MIB & IF-MIB)'
      groups:
        -
          name: BA/Modules
      discovery_rules:
        -
          uuid: e4cdcd9f67b24b3c93b312a52bf78a11
          name: 'Interfaces Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#NAME}, .1.3.6.1.2.1.31.1.1.1.1, {#ALIAS}, .1.3.6.1.2.1.31.1.1.1.18, {#STATUS}, .1.3.6.1.2.1.2.2.1.8]'
          key: snmp.interfaces.discovery
          delay: 1h
          filter:
            conditions:
              -
                macro: '{#NAME}'
                value: '.*{$INTER_FILTER_REGEX}.*'
                operator: NOT_MATCHES_REGEX
                formulaid: B
              -
                macro: '{#ALIAS}'
                value: '.*{$INTER_FILTER_REGEX}.*'
                operator: NOT_MATCHES_REGEX
                formulaid: A
              -
                macro: '{#STATUS}'
                value: '6'
                operator: NOT_MATCHES_REGEX
                formulaid: C
          lifetime: 90d
          item_prototypes:
            -
              uuid: 576a848531354683a43cef5b68674ccd
              name: 'Interface ({#NAME}: {#ALIAS}) Admin Status'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.2.1.2.2.1.7.{#SNMPINDEX}'
              key: 'snmp.interfaces.adminstatus[{#SNMPINDEX}]'
              delay: 30m
              history: 7d
              valuemap:
                name: 'Operational Status'
            -
              uuid: 5760b2886c8640fd9bab2f200c57ce0d
              name: 'Interface ({#NAME}: {#ALIAS}) In Errors'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.2.1.2.2.1.14.{#SNMPINDEX}'
              key: 'snmp.interfaces.in.errors[{#SNMPINDEX}]'
              delay: 15s
              history: 7d
              units: bps
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '8'
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
            -
              uuid: 6b9bd480242345febbcfc08b18bece36
              name: 'Interface ({#NAME}: {#ALIAS}) In Usage'
              type: CALCULATED
              key: 'snmp.interfaces.in.usage[{#SNMPINDEX}]'
              delay: 15s
              history: 7d
              value_type: FLOAT
              units: '%'
              params: 'last(//snmp.interfaces.in[{#SNMPINDEX}])/last(//snmp.interfaces.speed[{#SNMPINDEX}])'
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '100'
            -
              uuid: d41db500945643b6afc4b82015f5f5e6
              name: 'Interface ({#NAME}: {#ALIAS}) In Rate'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.2.1.2.2.1.10.{#SNMPINDEX}'
              key: 'snmp.interfaces.in[{#SNMPINDEX}]'
              delay: 15s
              history: 7d
              units: bps
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '8'
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
            -
              uuid: b39447b3446c4432a3c66ef3e46fb5a6
              name: 'Interface ({#NAME}: {#ALIAS}) Operational Status'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.2.1.2.2.1.8.{#SNMPINDEX}'
              key: 'snmp.interfaces.operstatus[{#SNMPINDEX}]'
              history: 7d
              valuemap:
                name: 'Operational Status'
            -
              uuid: 8767d44b389a4d39bfa7cdd9bef3e19d
              name: 'Interface ({#NAME}: {#ALIAS}) Out Errors'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.2.1.2.2.1.20.{#SNMPINDEX}'
              key: 'snmp.interfaces.out.errors[{#SNMPINDEX}]'
              delay: 15s
              history: 7d
              units: bps
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '8'
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
            -
              uuid: 27685ca79f79438f9dcd391306f44291
              name: 'Interface ({#NAME}: {#ALIAS}) Out Usage'
              type: CALCULATED
              key: 'snmp.interfaces.out.usage[{#SNMPINDEX}]'
              delay: 15s
              history: 7d
              value_type: FLOAT
              units: '%'
              params: 'last(//snmp.interfaces.out[{#SNMPINDEX}])/last(//snmp.interfaces.speed[{#SNMPINDEX}])'
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '100'
            -
              uuid: 560a80f3986f4daaa67307817be05cda
              name: 'Interface ({#NAME}: {#ALIAS}) Out Rate'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.2.1.2.2.1.16.{#SNMPINDEX}'
              key: 'snmp.interfaces.out[{#SNMPINDEX}]'
              delay: 15s
              history: 7d
              units: bps
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '8'
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
            -
              uuid: d025c6fb73e04829822ba94aa58f4a45
              name: 'Interface ({#NAME}: {#ALIAS}) Speed'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.2.1.31.1.1.1.15.{#SNMPINDEX}'
              key: 'snmp.interfaces.speed[{#SNMPINDEX}]'
              delay: 5m
              history: 7d
              units: bps
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '1000000'
          trigger_prototypes:
            -
              uuid: 62ed56a4a893446fa8515de4852ca5fa
              expression: 'sum(/BA - Interfaces/snmp.interfaces.in.errors[{#SNMPINDEX}],{$INTER_ERROR_WARN_TIME})>={$INTER_ERROR_WARN} or sum(/BA - Interfaces/snmp.interfaces.out.errors[{#SNMPINDEX}],{$INTER_ERROR_WARN_TIME})>={$INTER_ERROR_WARN}'
              name: 'Errors on Interface: {#NAME}: {#ALIAS}'
              priority: WARNING
            -
              uuid: b429247383cd421db1f0e4471e286c98
              expression: 'last(/BA - Interfaces/snmp.interfaces.in.usage[{#SNMPINDEX}])>={$INTER_USAGE_WARN} or last(/BA - Interfaces/snmp.interfaces.out.usage[{#SNMPINDEX}])>={$INTER_USAGE_WARN}'
              name: 'High Usage on Interface: {#NAME}: {#ALIAS}'
              priority: WARNING
          graph_prototypes:
            -
              uuid: 777a7a1a8c8d49aea746670c7dacd759
              name: 'Interface ({#NAME}: {#ALIAS}) Statistics'
              graph_items:
                -
                  color: 1E88E5
                  calc_fnc: ALL
                  item:
                    host: 'BA - Interfaces'
                    key: 'snmp.interfaces.in[{#SNMPINDEX}]'
                -
                  sortorder: '1'
                  color: 2E7D32
                  calc_fnc: ALL
                  item:
                    host: 'BA - Interfaces'
                    key: 'snmp.interfaces.out[{#SNMPINDEX}]'
                -
                  sortorder: '2'
                  color: FF5722
                  calc_fnc: ALL
                  item:
                    host: 'BA - Interfaces'
                    key: 'snmp.interfaces.in.errors[{#SNMPINDEX}]'
                -
                  sortorder: '3'
                  color: FFA726
                  calc_fnc: ALL
                  item:
                    host: 'BA - Interfaces'
                    key: 'snmp.interfaces.out.errors[{#SNMPINDEX}]'
      macros:
        -
          macro: '{$INTER_ERROR_WARN}'
          value: '100'
          description: '# of bps to warn in the last 5 minutes.'
        -
          macro: '{$INTER_ERROR_WARN_TIME}'
          value: 5m
        -
          macro: '{$INTER_FILTER_REGEX}'
          value: '(tunnel|ppp|loopback|LightWeight|Scheduler|Local Area Connection|Hyper-V)'
          description: 'Filters via Name & Alias'
        -
          macro: '{$INTER_USAGE_WARN}'
          value: '95'
          description: '%'
      dashboards:
        -
          uuid: 9f66f49a16914a42b4731103a16d816f
          name: Interfaces
          pages:
            -
              widgets:
                -
                  type: GRAPH_PROTOTYPE
                  width: '24'
                  height: '11'
                  fields:
                    -
                      type: INTEGER
                      name: rows
                      value: '2'
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        host: 'BA - Interfaces'
                        name: 'Interface ({#NAME}: {#ALIAS}) Statistics'
      valuemaps:
        -
          uuid: 042dd6004ca744328459b83d571efd02
          name: 'Operational Status'
          mappings:
            -
              value: '1'
              newvalue: Up
            -
              value: '2'
              newvalue: Down
            -
              value: '3'
              newvalue: Testing
