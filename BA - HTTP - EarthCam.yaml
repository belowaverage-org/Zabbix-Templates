zabbix_export:
  version: '7.4'
  template_groups:
    - uuid: 8fdb1680986b48c781ac1ea2a485a917
      name: BA/HTTP
  templates:
    - uuid: d6073d64cf844db6ae1574b5a3fcfbf6
      template: 'BA - HTTP - EarthCam'
      name: 'BA - HTTP - EarthCam'
      vendor:
        name: 'below average'
        version: 0.0.0.0
      groups:
        - name: BA/HTTP
      items:
        - uuid: a0502a12ba5249dfb01a03e798118a9e
          name: 'Stream Status'
          type: HTTP_AGENT
          key: stream.status
          history: 7d
          valuemap:
            name: Status
          preprocessing:
            - type: CHECK_NOT_SUPPORTED
              parameters:
                - '-1'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
            - type: JAVASCRIPT
              parameters:
                - |
                  if (value == 0) return 0;
                  return 1;
          url: 'https://video1.earthcam.com/myearthcam/{$ID}.flv/playlist.m3u8'
          tags:
            - tag: Stream
            - tag: Type
              value: Status
          triggers:
            - uuid: 32243d54e53742548d132243527eeef7
              expression: 'last(/BA - HTTP - EarthCam/stream.status)=0'
              name: 'EarthCam Stream Offline'
              priority: WARNING
              manual_close: 'YES'
      tags:
        - tag: Type
          value: HTTP
      valuemaps:
        - uuid: 56dbdc982f0745749f5f42d68b37a747
          name: Status
          mappings:
            - value: '0'
              newvalue: Offline
            - value: '1'
              newvalue: Online

